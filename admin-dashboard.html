<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <link rel="stylesheet" href="css/styles.css"> 
    <script type="module" src="js/admin.js" defer></script>
    <script type="module" src="js/auth.js" defer></script> 
    <script type="module" src="js/admin-request.js" defer></script>
    <script type="module" src="js/admin-account.js" defer></script> 
    <script type="module" src="js/admin-notification.js" defer></script> 
    <script type="module" src="js/admin-analysis-report.js" defer></script>
    <script type="module" src="js/admin-home.js" defer></script>  
    <script type="module" src="js/admin-forecast.js" defer></script>  
    <script type="module" src="js/admin-home-event.js" defer></script>  
    <script type="module" src="js/admin-settings.js" defer></script>  
    <script type="module" src="js/request-forecast.js" defer></script> 
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.0/main.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            emailjs.init("7kR-yt2FCf_WWkegz"); // Replace with your EmailJS user ID
        })();
    </script>

</head>
<body>

    <!-- Header -->
    <header class="admin-header">
        <div class="header-content">
            <button id="openSidebar" class="sidebar-openbtn">&#9776;</button>
            <div class="admin-logo">
                <img src="images/logo.webp" alt="CNSRR Logo">
                <div class="admin-logo-text">
                    <h3>Center for Natural Sciences and</h3>
                    <h4>Resources Research</h4>
                    <p class="sub-name">Research Institute of Science and Technology</p>
                </div>
            </div>
        </div>
        
        <div class="header-icons">
            <button id="notificationsBtn" class="notifications-btn">
                <i class="fa-solid fa-circle-exclamation"></i>
                <span id="notificationCount" class="notification-count">0</span>
            </button>
            <button id="settingsBtn"><i class="fa-solid fa-gear"></i></button>
        </div>
    </header>
    
    
    <!-- Sidebar -->
    <div id="sidebar" class="admin-sidebar">

        <a href="#" id="dashboardLink" onclick="openTab(event, 'home')">
            <i class="fa-solid fa-home"></i> 
            <span class="lab-side">Dashboard </span>
        </a>
        <a href="#" id="requestListLink" onclick="openTab(event, 'requestList')">
            <i class="fa-solid fa-file"></i> 
            <span class="lab-side">Request Lists </span>
        </a>
        <a href="#" id="manageUsersLink" onclick="openTab(event, 'manageUsers')">
            <i class="fa-solid fa-users-gear"></i>

            <span class="lab-side">Manage Users </span>
        </a>
        <a href="#" id="analysisReportLink" onclick="openTab(event, 'analysisReport')">
            <i class="fa-solid fa-clipboard-list"></i>
            <span class="lab-side">Analysis Report </span>
        </a>
        <a href="#" id="appointmentLink" onclick="openTab(event, 'appointment')">
            <i class="fa-solid fa-calendar-alt"></i> 
            <span class="lab-side">Appointment </span>
        </a>
        <a href="#" id="eventsLink" onclick="openTab(event, 'events')">
            <i class="fa-solid fa-bullhorn"></i> 
            <span class="lab-side">Events </span>
        </a>
        <a href="#" id="accountLink" onclick="openTab(event, 'account')">
            <i class="fa-solid fa-user"></i> 
            <span class="lab-side">Account </span>
        </a>
        <a href="#" id="logoutBtn" class="sidebar-btn" >
            <i class="fa-solid fa-sign-out"></i> 
            <span class="lab-side">Logout</span>
        </a>
    </div>
    

    <!-- Page Content -->
    <div id="main">
        
        
        <!-- Notification Pop-up Tab -->
        <div id="notificationPopup" class="notification-popup hidden">
            <div class="popup-header">
                <h2>NOTIFICATIONS</h2>
                <button id="closePopup" class="close-popup-btn">&times;</button>
            </div>
            <div id="notificationsList" class="popup-body">
                <p>No notifications available</p>
            </div>
        </div>
        
        <!-- Settings Section -->
        <div id="adminSettingsSection" class="hidden">
            <h1 class="settingslabel">Settings</h1>
            <form id="settingsPasswordResetForm">
                <h2 style="margin: 10px;">Change Password</h2>
                <label id="enter" for="email">Enter your email to reset your password</label>
                <input class="user-icon" type="email" id="resetEmail" placeholder="Email" required>
                <button id="reset-btn" type="submit">Reset Password</button>
            </form>
        </div>

        <!-- Main Content -->
        <div id="content" class="content">
            <!-- Admin Content -->
            <div id="admin-content" class="hidden">
                <!-- Add admin-specific content here -->
            </div>
            
            <!-- Error Message -->
            <div id="admin-error-message" class="hidden">
                <p>You are not authorized to view this content.</p>
            </div>

           <!-- Home Tab -->
            <div id="home" class="tabcontent hidden" >
                <h2>Home</h2>
                <p>Welcome to the Admin Dashboard! Here you can manage clients, laboratory </p>

                <!-- Dashboard Boxes -->
                <div class="dashboard-container">
                    <!-- Row 1 -->
                    <div class="dashboard-row">
                        <div class="dashboard-box green">
                            <h3>
                                <span class="count" id="pendingRequestsCount">0</span><br>
                                Pending Requests <i class="fa-solid fa-file"></i>
                            </h3>
                        </div>
                        <div class="dashboard-box yellow">
                            <h3>
                                <span class="count" id="ongoingRequestsCount">0</span><br>
                                Ongoing Requests <i class="fa-solid fa-spinner"></i>
                            </h3>
                        </div>  
                        <div class="dashboard-box gray">
                            <h3>
                                <span class="count" id="overallRequestsCount">0</span><br>
                                Overall Requests (This Month) <i class="fa-solid fa-calendar-alt"></i>
                            </h3>
                        </div>
                    </div>

                    <!-- Row 2 -->
                    <div class="dashboard-row">
                        <div class="dashboard-box orange">
                            <h3>
                                <span class="count" id="pendingFollowUpCount">0</span><br>
                                Pending Follow-Up <i class="fa-solid fa-comments"></i>
                            </h3>
                        </div>
                        <div class="dashboard-box red">
                            <h3>
                                <span class="count" id="pendingAnalysisReportCount">0</span><br>
                                Pending Analysis Report <i class="fa-solid fa-chart-line"></i>
                            </h3>
                        </div>
                        <div class="dashboard-box blue">
                            <h3>
                                <span class="count" id="pendingUserRegistrationCount">0</span><br>
                                Pending User Registration <i class="fa-solid fa-user-plus"></i>
                            </h3>
                        </div>
                    </div>
                </div>

                <!-- Forecasting and Top 3 Requests Section -->
                <div class="charts-container">
                    <h2>Request Forecasting and Top Requests</h2>

                    <div class="chart-box-container"> <!-- New container for the chart boxes -->
                        <!-- Line Chart for Forecasting Requests -->
                        <div class="chart-box">
                            <h3>Request Forecasting (Past 3 Months + Future 3 Months)</h3>
                            <canvas id="forecastChart"></canvas>
                        </div>

                        <!-- Line Chart for Top 3 Request Types -->
                        <div class="chart-box">
                            <h3>Top 3 Request Types</h3>
                            <canvas id="topRequestsChart"></canvas>
                        </div>
                    </div>
                </div>
                
               <!-- Admin Events Section -->
                <div class="admin-events-section">
                    <h2 id="adminUpcomingEventsTitle">Upcoming Events</h2>

                    <!-- Event Search -->
                    <input type="text" id="adminEventSearch" placeholder="Search events..." class="admin-search-bar">

                    <!-- Event Container -->
                    <div id="adminEventContainer" class="admin-event-container">
                        <!-- Events will be dynamically rendered here -->
                    </div>
                </div>

                <!-- Event Details Modal -->
                <div id="adminEventDetailsModal" class="admin-modal">
                    <div class="admin-modal-content">
                        <span class="admin-close">&times;</span>
                        <img id="adminEventImageModal" src="" alt="Event Image">
                        <h3 id="adminEventTitleModal"></h3>
                        <p id="adminEventDescriptionModal"></p>
                    </div>
                </div>
            </div>


            <!-- Request List Tab -->
            <div id="requestListContainer">
                <div id="requestList" class="tabcontent">
                        <div style="border-bottom: 2px solid black; margin-bottom: 0px;">
                            <div class="header-section">
                                <h1 class="left-align">Request List</h1>
                                <button id="forecastBtn">Forecast</button>
                            </div>
                            
                            <div id="requestButtons" class="manageuserbutton">
                                <button class="color-change active" id="allRequestsBtn" onclick="openTab(event, 'allRequests')">All Requests</button>
                                <button class="color-change" id="serviceRequestsBtn" onclick="openTab(event, 'serviceRequests')">Service Requests</button>
                                <button class="color-change" id="followUpRequestsBtn" onclick="openTab(event, 'followUpRequests')">Follow-up Requests</button>
                                
                            </div>                            
                        </div>
                        
                        <div id="table-container">
                            <div id="allRequests-table-container">
                                <div style="display: flex; justify-content: space-between;">
                                    <h2>All Requests</h2>
                                    <!-- Search and Forecast Button -->
                                    <div style="margin-top: 0; margin-bottom: 0;">
                                        <input type="text" id="allRequestsSearch" placeholder="Search all requests...">
                                    </div>

                                </div>
                                <table id="allRequestsTable">
                                    <thead>
                                        <tr>
                                            <th id="dateHeader" style="cursor: pointer;">Date</th>
                                            <th>Request ID</th>
                                            <th>Client Type</th>
                                            <th>Client Name</th>
                                            <th>No. of Samples</th>
                                            <th>Request Type</th>
                                            <th style="width: 20%;text-align: center;">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- All requests will be inserted here -->
                                    </tbody>
                                </table>
                            </div>
                            <div id="serviceRequests-table-container" style="display: none;">
                                <div style="display: flex; justify-content: space-between;">
                                    <h2>Service Requests</h2>
                                    <div style="margin-top: auto;">
                                        <input type="text" id="serviceRequestsSearch" placeholder="Search service requests...">
                                    </div>
                                </div>
                                <table id="serviceRequestsTable">
                                    <thead>
                                        <tr>
                                            <th id="dateHeaderSR" style="cursor: pointer;">Date</th>
                                            <th>Request ID</th>
                                            <th>Client Type</th>
                                            <th>Client Name</th>
                                            <th>No. of Samples</th>
                                            <th>Request Type</th>
                                            <th style="width: 20%;text-align: center;">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Service requests will be inserted here -->
                                    </tbody>
                                </table>
                            </div>
                            <div id="followUpRequests-table-container" style="display: none;">
                                <div style="display: flex; justify-content: space-between;">
                                    <h2>Follow-up Requests</h2>
                                    <div style="margin-top: auto;">
                                        <input type="text" id="followUpRequestsSearch" placeholder="Search follow-up requests...">
                                    </div>
                                </div>
                                <table id="followUpRequestsTable">
                                    <thead>
                                        <tr>
                                            <th id="dateHeaderFR" style="cursor: pointer;">Date</th>
                                            <th>Request ID</th>
                                            <th>Client Type</th>
                                            <th>Client Name</th>
                                            <th>No. of Samples</th>
                                            <th>Request Type</th>
                                            <th style="width: 20%;text-align: center;">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Follow-up requests will be inserted here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <a href="#" id="requestHistoryBtn">
                            <i class="fas fa-history" style="font-size: 24px; margin-right: 5px;"></i> <!-- History icon -->
                            <span style="line-height: 1;">Request History</span> <!-- Adjust line height -->
                        </a>
                        
                            <div id="paginationControls" style="display: flex; justify-content: center; align-items: center; width: 100%;">
                                <button id="prevPage" disabled>Previous</button>
                                <span id="pageInfo">Page 1</span>
                                <button id="nextPage">Next</button>
                            </div>
                        </div>
                        
                    </div>

                <!-- Request History Section -->
                <div id="requestHistoryContainer" style="display: none; ">
                    <div style="border-bottom: 2px solid black;">
                        <h1>Request History</h1>
                        <div id="requestHistoryButtons" class="manageuserbutton">
                            <button class="color-change" id="rejectedRequestsBtn" >Rejected Requests</button>
                            <button class="color-change" id="releasedRequestsBtn" >Released Requests</button>
                        </div>
                    </div>

                    <!-- Released Requests Table -->
                    <div id="releasedRequests-table-container" style="display: none;">
                        <div class="released-requests-header">
                            <h2>Released Requests</h2>
                            <input type="text" id="releasedRequestsSearch" placeholder="Search Released requests...">
                        </div>                        
                        <table id="releasedRequestsTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Request ID</th>
                                    <th>Client Type</th>
                                    <th>Client Name</th>
                                    <th>No. of Samples</th>
                                    <th>Request Type</th>
                                    <th style="width: 20%;text-align: center;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Released requests will be inserted here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Rejected Requests Table -->
                    <div id="rejectedRequests-table-container" style="display: none;">
                        <div class="released-requests-header">
                            <h2>Rejected Requests</h2>
                            <input type="text" id="rejectedRequestsSearch" placeholder="Search Rejected requests...">
                        </div>
                        <table id="rejectedRequestsTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Request ID</th>
                                    <th>Client Type</th>
                                    <th>Client Name</th>
                                    <th>No. of Samples</th>
                                    <th>Request Type</th>
                                    <th style="width: 20%;text-align: center;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Rejected requests will be inserted here -->
                            </tbody>
                        </table>
                    </div>

                    <div id="paginationControls" style="display: flex; justify-content: center; margin-top: 20px;">
                        <button id="prevHistoryPage" disabled>Previous</button>
                        <span id="historyPageInfo">Page 1</span>
                        <button id="nextHistoryPage">Next</button>
                    </div>
                    <button id="backRequestHistoryButton">Back</button>
                </div>
            </div>

         <!-- Forecasting and Top 3 Requests Section -->
         <div id="forecastSection" style="display: none;">
            <div class="charts-container">
                <h2>Request Forecasting and Top Requests</h2>
                
                <!-- Line Chart for Forecasting Requests -->
                <div class="chart-box">
                    <h3>Request Forecasting (Past 3 Months + Future 3 Months)</h3>
                    <canvas id="requestForecastChart"></canvas>
                </div>

                <!-- Line Chart for Top 3 Request Types -->
                <div class="chart-box">
                    <h3>Top 3 Request Types</h3>
                    <canvas id="requestsTopRequestsChart"></canvas>
                </div>
            </div>
            <button id="backForecastBtn">Back</button>
        </div>

<!-- Admin Request Details Section -->
<div id="adminRequestDetailsSection" class="hidden">
    <div class="request-header">
        <h2 id="adminRequestDetailsHeader"></h2>
        <button id="backButton">
            <i class="fas fa-arrow-left"></i> 
        </button>
        
    </div>
    <div id="adminRequestDetailsContent" class="request-details"></div>
</div>

        <div id="appointmentPage" class="hidden">
            <!-- The content will be dynamically generated by the showAppointmentPage function -->
        </div>

                        <!-- Analysis Report Tab -->
                        <div id="analysisReport" class="tabcontent hidden">
                            <h2 style="margin-bottom: 1px;">Analysis Report</h2>
                            <div class="header-container" style="border-bottom: 2px solid black; margin-bottom: 0px;"">
                                <p>This section displays all analysis report messages and their corresponding Request IDs.</p>
                                <input type="text" id="searchBar" placeholder="Search by Request ID or Client Name" oninput="filterAnalysisReports()">
                            </div>
                            <table id="analysisReportTable">
                                <thead>
                                    <tr>
                                        <th>Message</th>
                                        <th>Request ID</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="analysisReportTableBody">
                                    <!-- Analysis report rows will be dynamically added here -->
                                </tbody>
                            </table>
                        </div>

            <!-- Admin Account Tab -->
            <div id="account" class="tabcontent" style="display:none;">

                <h1 class="accproflabel">Account Profile</h1>
                <div class="adminprofile">
                <h2 class="profinfolabel">Profile Information</h2>

                <div class="accountinfo">
                <!-- Full Name and Account Number (Header) -->
                <div class="account-header">
                    <!-- Profile picture placeholder -->
                    <div class="profile-picture-container">
                        <img id="profilePicture" class="profile-picture" src="images/default-avatar.png" alt="Profile Picture">
                        <input type="file" id="profilePictureInput" accept="image/*" style="display: none;">
                    </div>

                    <!-- Account Details -->
                    <div class="account-details">
                        <span id="fullName" class="full-name"></span>
                        <p class="account-number" id="accountNumber"></p>
                    <!-- Admin Role Bubble -->
                        <div class="role-bubble" style="background-color: blue; color: white;">
                        Admin
                        </div>
                    </div>
                </div>

                <!-- Account Details Bubbles -->
                <div class="account-details">
                    <div class="detail-bubble"><p class="accdeetslbl">Full Name:</p> <span id="fullNameDetail"></span></div>
                    <div class="detail-bubble"><p class="accdeetslbl">Address:</p>  <span id="address"></span></div>
                    <div class="detail-bubble"><p class="accdeetslbl">Contact Number:</p>  <span id="contactNumber"></span></div>
                    <div class="detail-bubble"><p class="accdeetslbl">Username:</p>  <span id="username"></span></div>
                </div>

                <!-- Edit Button -->
                <button id="editAccountBtn" class="edit-btn">Edit</button>
            </div>
            </div>
            </div>

            <!-- Edit Modal -->
            <div id="editModal" class="modal">
                <div class="modal-content" style="display:flex;flex-direction: column; height: 67vh;">
                    <span class="close">&times;</span>
                    <h2>Edit Account Details</h2>

                    <div style="display: flex;align-items: center;justify-content: space-between;">
                        <div style="display: flex;flex-direction: column;width: 30%;">
                            <label for="editFirstName">First Name:</label>
                            <input type="text" id="editFirstName" placeholder="First Name">
                        </div>

                        <div style="display: flex;flex-direction: column;width: 30%;">
                            <label for="editMiddleName">Middle Name:</label>
                            <input type="text" id="editMiddleName" placeholder="Middle Name">
                        </div>

                        <div style="display: flex;flex-direction: column;width: 30%;">
                            <label for="editLastName">Last Name:</label>
                            <input type="text" id="editLastName" placeholder="Last Name">
                        </div>
                    </div>

                    <label for="editUsername">Username:</label>
                    <input type="text" id="editUsername" placeholder="Username">

                    <label for="editAddress">Address:</label>
                    <input type="text" id="editAddress" placeholder="Address">

                    <label for="editContactNumber" style="width: 250px;">Contact Number:</label>
                    <input type="text" id="editContactNumber" placeholder="Contact Number">

                    <button id="saveChangesBtn">Save Changes</button>
                </div>
            </div>

            <!-- Appointment Tab -->
            <div id="appointment" class="tabcontent hidden">
                <div style="border-bottom: 2px solid black; margin-bottom: 0px;"">
                    <h2>Appointments</h2> 
                </div>

                <table id="appointmentsTable">
                    <thead>
                        <tr>
                            <th id="appointmentDateHeader" style="cursor: pointer;">Date</th>
                            <th>Request ID</th>
                            <th>Client Name</th>
                            <th>End Date</th>
                            <th>Assigned Staff</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="6">No appointments scheduled.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Edit Appointment Modal -->
            <div id="editAppointmentModal" class="modal hidden">
                <div class="editmodal-content">
                    <span class="close">&times;</span>
                    <h2>Edit Appointment</h2>
                    <label for="staffSelect">Assigned Laboratory Staff:</label>
                    <select id="staffSelect"></select><br>
                    
                    <label for="endDate">Estimated End Date:</label>
                    <input type="date" id="endDate" /><br>
                    
                    <button id="saveButton" style="margin-left: 160px;">Save</button>
                </div>
            </div>

            <!-- Events Tab -->
            <div id="events" class="tabcontent hidden">
                <div class="events-header">
                <h2>Events and Activities</h2>
                <input type="text" id="eventSearch" placeholder="Search Events..." style="margin-left: 20px;">
                <button id="addEventBtn" style="margin-left: 20px;">Add Event</button>
                </div>
                
                <div id="eventContainer" class="scroll-container">
                <!-- Scrollable event list will be rendered here -->
                </div>
            </div>
            
                <!-- Add Event Form - Initially Hidden -->
                <div id="addEventForm" style="display: none;">
                    <h3>Add New Event</h3>
                    
                    <div class="form-container">
                        <!-- Container for the image upload section -->
                        <div class="photo-container">
                            
                            <label for="eventImage" style="width: 200px;margin-bottom: 15px;">Upload Image:</label>
                            <div style="display: flex;align-items: center;flex-direction: column;">
                                <div id="imagePreview" style="border: 1px solid #ccc; width: 15vw; height: 30vh;"></div>
                                <input type="file" id="eventImage"><br>
                            </div>
                            
                            <div style="display: flex;align-items: center;justify-content: space-around;">
                                <label for="eventStartDate">Start Date:</label>
                                <input type="date" id="eventStartDate">
                            </div>
                            <div style="display: flex;align-items: center;justify-content: space-around;">
                                <label for="eventEndDate">End Date:</label>
                                <input type="date" id="eventEndDate">
                            </div>
                        </div>
                        
                        <!-- Container for the event title and description -->
                        <div class="event-details-container">
                            <div style="display: flex;align-items: flex-start;justify-content: space-between;flex-direction: column;">
                                <label for="eventTitle">Title:</label>
                                <input type="text" id="eventTitle" placeholder="Event Title">
                            </div>
                            <div style="display: flex;align-items: flex-start;justify-content: space-between;flex-direction: column;">
                            <label for="eventDescription">Description:</label>
                            <textarea id="eventDescription" placeholder="Event Description"></textarea>
                            </div>
                            <button id="uploadEventBtn">Upload Event</button>
                            <button id="closeAddEventForm" style="float: right;">Close</button>
                        </div>
                    </div>
                </div>

            
            <!-- Event Details Modal -->
            <div id="eventDetailsModal" style="display: none;">
                <div class="eventdetails-modal">
                <span class="close">&times;</span>
                <img id="eventImageModal" src="" alt="Event Image" style="width: 100%; height: 100%; object-fit: contain; padding: 10px; border-radius: 10px;">
                <h3 id="eventTitleModal"></h3>
                <p id="eventDescriptionModal"></p>
                <button id="editEventBtn">Edit</button>

                
                <button id="deleteEventBtn">Delete</button>
                </div>
            </div>
            
            <!-- Edit Event Modal -->
            <div id="editEventModal" style="display: none;">
                <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Edit Event</h3>
                <label for="editEventTitle">Title:</label>
                <input type="text" id="editEventTitle" placeholder="Event Title">
                <br><br>
                <label for="editEventDescription">Description:</label>
                <textarea id="editEventDescription" placeholder="Event Description"></textarea>
                <br>
                <button id="saveEditEventBtn">Save</button>
                </div>
            </div>

            <!-- Manage Users Tab -->
            <div id="manageUsers" class="tabcontent hidden">
                <div class="manageusers">
                    <div style="border-bottom: 2px solid black;">
                    <h1>Manage Users</h1>
                            <div id="manageUsersButtons" class="manageuserbutton">
                                <button class="color-change active" id="clientsBtn" onclick="openTab(event, 'clients')">Clients</button>
                                <button class="color-change" id="staffBtn" onclick="openTab(event, 'staff')">Laboratory Staff</button>
                                <button class="color-change" id="newRequestsBtn" onclick="openTab(event, 'newRequests')">New User Requests</button>
                            </div>
                    </div>
                    <div id="table-container">
                        <div id="clients-table-container">
                            <div style="display: flex; justify-content: space-between;">
                                <h2>Clients List</h2>
                                <div class="client-container">
                                    <input type="text" id="clientSearch" placeholder="Search clients...">
                                    <button id="addClientBtn">+  New Client</button>
                                </div>                                
                            </div>
                        <table id="clientsTable">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>No. of Requests</th>
                                    <th>Client Type</th>
                                    <th style="width: 20%;text-align: center;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Clients will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                    <div id="staff-table-container" style="display: none;">
                        <div style="display: flex; justify-content: space-between;">
                            <h2>Laboratory Staff List</h2>
                            <div class="staff-search-container">
                                <input type="text" id="staffSearch" placeholder="Search staff...">
                                <button id="addStaffBtn">+ New Staff</button>
                            </div>
                        </div>
                        <table id="staffTable">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>No. of Assigned Task</th>
                                    <th style="width: 20%;text-align: center;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Laboratory staff will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                    <div id="newRequests-table-container" style="display: none;">
                        <h2>New User Requests</h2>
                        <table id="newRequestsTable">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Role</th>
                                    <th>Client Type / Department</th>
                                    <th style="width: 22%;text-align: center;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dynamic content will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            </div>

            <!-- Client Details Modal -->
            <div id="clientDetailsModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <!-- Client details will be inserted here -->
                </div>
            </div>

            <!-- Modal for adding a new client -->
            <div id="addClientModal" class="modal">
                <div class="modal-content">
                    <span id="closeAddClientModal" class="close">&times;</span>
                    <h2>Add New Client</h2>
                    <form id="addClientForm">
                        <div style="display: flex; gap: 10px; ">
                            <div style="display: flex;gap:1px;flex-direction: column; width: 33%;">
                                <label for="firstName">First Name:</label> 
                                <input type="text" id="firstName" required>
                            </div>
                        
                            <div style="display: flex;gap:1px;flex-direction: column; width: 33%;">
                                <label for="middleName">Middle Name:</label>
                                <input type="text" id="middleName">
                            </div>
                            
                            <div style="display: flex;gap:1px;flex-direction: column; width: 33%;">
                                <label for="lastName">Last Name:</label>
                                <input type="text" id="lastName" required >
                            </div>
                        </div>

                        <!--<label for="newClientRole">Role:</label>
                        <input type="text" id="newClientRole" value="Client" readonly><br><br> -->

                        <br><label for="newClientEmail">Email:</label>
                        <input type="email" id="newClientEmail" required><br>

                        <label>Client Type:</label><br>
                        <div style="display: flex; gap: 10px; ">
                        <label>
                            <input type="radio" name="clientType" value="Internal" required>
                            Internal Client
                        </label><br>
                        <label>
                            <input type="radio" name="clientType" value="External">
                            External Client
                        </label>
                        </div>
                        
                        <br><br><label for="address">Address:</label>
                        <input type="text" id="address" required><br>
                        
                        <label for="username">Username:</label>
                        <input type="text" id="username" required><br>
                        
                        <label for="contactNumber">Contact Number:</label>
                        <input type="text" id="contactNumber" required><br>
                        <select id="userType" required>
                            <option value="" disabled selected>Select Account Type</option>
                            <option value="student">Student</option>
                            <option value="teacher">Teacher</option>
                        </select>            
                        <label for="school">School:</label>
                        <input type="text" id="school" required><br>
                        
                        <label for="department">Department:</label>
                        <input type="text" id="department" required><br>
                    </form>
                        <button type="submit" id="addClientSubmit">Add Client</button>

                </div>
            </div>

            <!-- Modal for adding a new laboratory staff --> 
            <div id="addStaffModal" class="modal">
                <div class="modal-content">
                    <span id="closeAddStaffModal" class="close">&times;</span>
                    <h2>Add New Laboratory Staff</h2>
                    <form id="addStaffForm">

                        <div style="display: flex; gap: 10px;     height: 100px;">
                            <div style="display: flex;gap:1px;flex-direction: column; width: 33%;">
                                <label for="staffFirstName">First Name:</label>
                                <input type="text" id="staffFirstName" required><br><br>
                            </div>
                        
                            <div style="display: flex;gap:1px;flex-direction: column; width: 33%;">
                                <label for="staffMiddleName">Middle Name:</label>
                                <input type="text" id="staffMiddleName"><br><br>
                            </div>
                            
                            <div style="display: flex;gap:1px;flex-direction: column; width: 33%;">
                                <label for="staffLastName">Last Name:</label>
                                <input type="text" id="staffLastName" required>
                            </div>
                        </div>

                        <label for="staffEmail">Email:</label>
                        <input type="email" id="newStaffEmail" required><br>
                        
                        <!-- <label for="newStaffRole">Role:</label>
                        <input type="text" id="newStaffRole" value="Laboratory Staff" readonly><br><br> -->
                        
                        <label for="staffAddress">Address:</label>
                        <input type="text" id="staffAddress" required><br>
                        
                        <label for="staffUsername">Username:</label>
                        <input type="text" id="staffUsername" required><br>
                        
                        <label for="staffContactNumber">Contact Number:</label>
                        <input type="text" id="staffContactNumber" required><br>
                        
                        <button type="submit" id="addStaffSubmit">Add Staff</button>
                    </form>
                </div>
            </div>

    <!-- Modal Structure -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span id="modalClose" class="close">&times;</span>
            <div id="modalBody">
                <!-- Modal content will be inserted here -->
            </div>
        </div>
    </div>

    <script src="js/admin-sidebar.js" defer></script> 
    <script type="module" src="js/appointment.js" defer></script> 
    <script type="module" src="js/events.js" defer></script> 
</body>
</html>
